// original test path: /Users/curtis/Github/Thesis/chatTester/Repos/Zappos_zappos-json/src/test/java/com/zappos/json/util/JsonUtils_ESTest.java
/*
 * This file was automatically generated by EvoSuite
 * Thu Jan 25 14:07:05 GMT 2024
 */
package com.zappos.json.util;
import org.junit.Test;
import static org.junit.Assert.*;
import java.io.StringWriter;
import java.io.IOException;
import org.junit.Test;
import static org.junit.Assert.*;
import static org.evosuite.runtime.EvoAssertions.*;
import com.zappos.json.ZapposJson;
import com.zappos.json.util.JsonUtils;
import java.io.CharArrayWriter;
import java.io.IOException;
import java.io.PipedWriter;
import java.io.StringWriter;
import java.io.Writer;
import java.nio.ByteBuffer;
import java.nio.CharBuffer;
import java.nio.charset.Charset;
import org.evosuite.runtime.EvoRunner;
import org.evosuite.runtime.EvoRunnerParameters;
import org.junit.runner.RunWith;

@RunWith(EvoRunner.class)
@EvoRunnerParameters(mockJVMNonDeterminism = true, useVFS = true, useVNET = true, resetStaticState = true, separateClassLoader = false)
public class JsonUtils_ESTest extends JsonUtils_ESTest_scaffolding {
    @Test
    public void testEscape_basicAndHtmlSafe() throws IOException {
        // Test input containing characters that should be escaped differently depending on htmlSafe flag
        String input = "\"<>&\u2028\u2029";

        // Expected outputs based on the REPLACEMENT_CHARS and HTML_SAFE_REPLACEMENT_CHARS arrays
        // Since we don't have direct access to those arrays, we rely on the documented behavior:
        // For htmlSafe = false, escape quotes and control chars but not HTML special chars
        // For htmlSafe = true, escape quotes and HTML special chars like <, >, &

        // For this test, we will verify that:
        // - When htmlSafe = false, <, >, & are not escaped, but quotes and \u2028, \u2029 are escaped
        // - When htmlSafe = true, <, >, & are escaped as &lt;, &gt;, &amp; (or their JSON escape equivalents)
        // Since the exact replacement strings are not given, we check for presence of expected escape sequences

        // Test with htmlSafe = false
        MockZapposJson jsonNonHtmlSafe = new MockZapposJson(false);
        StringWriter writer1 = new StringWriter();
        JsonUtils.escape(jsonNonHtmlSafe, input, writer1);
        String result1 = writer1.toString();

        // Quotes should be escaped as \"
        assertTrue(result1.contains("\\\""));
        // \u2028 and \u2029 should be escaped as unicode escapes
        assertTrue(result1.contains("\\u2028"));
        assertTrue(result1.contains("\\u2029"));
        // <, >, & should NOT be escaped
        assertTrue(result1.contains("<"));
        assertTrue(result1.contains(">"));
        assertTrue(result1.contains("&"));

        // Test with htmlSafe = true
        MockZapposJson jsonHtmlSafe = new MockZapposJson(true);
        StringWriter writer2 = new StringWriter();
        JsonUtils.escape(jsonHtmlSafe, input, writer2);
        String result2 = writer2.toString();

        // Quotes should be escaped as \"
        assertTrue(result2.contains("\\\""));
        // \u2028 and \u2029 should be escaped as unicode escapes
        assertTrue(result2.contains("\\u2028"));
        assertTrue(result2.contains("\\u2029"));
        // <, >, & should be escaped (likely as &lt;, &gt;, &amp; or JSON escapes)
        // Since the method escapes for JSON, likely as \u003c, \u003e, \u0026 or similar
        // Check that the raw characters do NOT appear
        assertFalse(result2.contains("<"));
        assertFalse(result2.contains(">"));
        assertFalse(result2.contains("&"));
    }
}

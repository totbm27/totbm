// original test path: /Users/curtis/Github/Thesis/chatTester/Repos/tabulapdf_tabula-java/src/test/java/technology/tabula/TextChunk_ESTest.java
/*
 * This file was automatically generated by EvoSuite
 * Sat Feb 10 10:15:23 GMT 2024
 */
package technology.tabula;

import org.junit.Test;
import static org.junit.Assert.*;
import static org.evosuite.runtime.EvoAssertions.*;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;
import org.evosuite.runtime.EvoRunner;
import org.evosuite.runtime.EvoRunnerParameters;
import org.junit.runner.RunWith;
import technology.tabula.Line;
import technology.tabula.Rectangle;
import technology.tabula.TextChunk;
import technology.tabula.TextElement;

@RunWith(EvoRunner.class)
@EvoRunnerParameters(mockJVMNonDeterminism = true, useVFS = true, useVNET = true, resetStaticState = true, separateClassLoader = false)
public class TextChunk_ESTest extends TextChunk_ESTest_scaffolding {
@Test
public void testMerge() {
    // Create TextElements for first chunk
    TextElement te1 = new TextElement("Hello", 10f, 10f, 5f, 5f);
    TextElement te2 = new TextElement("World", 15f, 15f, 5f, 5f);
    List<TextElement> elements1 = new ArrayList<>();
    elements1.add(te1);
    elements1.add(te2);

    // Create TextElements for second chunk, partially overlapping/adjacent
    TextElement te3 = new TextElement("Foo", 14f, 14f, 6f, 6f);
    TextElement te4 = new TextElement("Bar", 22f, 22f, 4f, 4f);
    List<TextElement> elements2 = new ArrayList<>();
    elements2.add(te3);
    elements2.add(te4);

    // Create first TextChunk
    TextChunk chunk1 = new TextChunk(elements1);
    // Create second TextChunk
    TextChunk chunk2 = new TextChunk(elements2);

    // Record initial bounding box of chunk1
    float initialTop = chunk1.getBounds2D().getY();
    float initialLeft = chunk1.getBounds2D().getX();
    float initialRight = (float)(initialLeft + chunk1.getBounds2D().getWidth());
    float initialBottom = (float)(initialTop + chunk1.getBounds2D().getHeight());

    // Record initial bounding box of chunk2
    float otherTop = chunk2.getBounds2D().getY();
    float otherLeft = chunk2.getBounds2D().getX();
    float otherRight = (float)(otherLeft + chunk2.getBounds2D().getWidth());
    float otherBottom = (float)(otherTop + chunk2.getBounds2D().getHeight());

    // Merge chunk2 into chunk1
    TextChunk merged = chunk1.merge(chunk2);

    // Verify the returned instance is the same as chunk1
    org.junit.Assert.assertSame(chunk1, merged);

    // Calculate expected bounding box after merge
    float expectedTop = Math.min(initialTop, otherTop);
    float expectedLeft = Math.min(initialLeft, otherLeft);
    float expectedRight = Math.max(initialRight, otherRight);
    float expectedBottom = Math.max(initialBottom, otherBottom);
    float expectedWidth = expectedRight - expectedLeft;
    float expectedHeight = expectedBottom - expectedTop;

    // Verify bounding box of merged chunk
    Rectangle2D bounds = merged.getBounds2D();
    org.junit.Assert.assertEquals(expectedTop, (float)bounds.getY(), 0.001f);
    org.junit.Assert.assertEquals(expectedLeft, (float)bounds.getX(), 0.001f);
    org.junit.Assert.assertEquals(expectedWidth, (float)bounds.getWidth(), 0.001f);
    org.junit.Assert.assertEquals(expectedHeight, (float)bounds.getHeight(), 0.001f);

    // Verify all TextElements from both chunks are present in merged chunk's text
    String mergedText = merged.getText();
    for (TextElement te : elements1) {
        org.junit.Assert.assertTrue("Merged text should contain: " + te.getText(),
                mergedText.contains(te.getText()));
    }
    for (TextElement te : elements2) {
        org.junit.Assert.assertTrue("Merged text should contain: " + te.getText(),
                mergedText.contains(te.getText()));
    }

    // Test merging with an empty chunk (no elements)
    TextChunk emptyChunk = new TextChunk(0f, 0f, 0f, 0f);
    TextChunk resultAfterEmptyMerge = merged.merge(emptyChunk);
    // Should return same instance
    org.junit.Assert.assertSame(merged, resultAfterEmptyMerge);
    // Bounding box should remain unchanged
    Rectangle2D boundsAfterEmpty = merged.getBounds2D();
    org.junit.Assert.assertEquals(bounds.getX(), boundsAfterEmpty.getX(), 0.001f);
    org.junit.Assert.assertEquals(bounds.getY(), boundsAfterEmpty.getY(), 0.001f);
    org.junit.Assert.assertEquals(bounds.getWidth(), boundsAfterEmpty.getWidth(), 0.001f);
    org.junit.Assert.assertEquals(bounds.getHeight(), boundsAfterEmpty.getHeight(), 0.001f);

    // Test merging with identical chunk (merge chunk with itself)
    TextChunk resultAfterSelfMerge = merged.merge(merged);
    org.junit.Assert.assertSame(merged, resultAfterSelfMerge);
    // Bounding box should remain unchanged
    Rectangle2D boundsAfterSelf = merged.getBounds2D();
    org.junit.Assert.assertEquals(bounds.getX(), boundsAfterSelf.getX(), 0.001f);
    org.junit.Assert.assertEquals(bounds.getY(), boundsAfterSelf.getY(), 0.001f);
    org.junit.Assert.assertEquals(bounds.getWidth(), boundsAfterSelf.getWidth(), 0.001f);
    org.junit.Assert.assertEquals(bounds.getHeight(), boundsAfterSelf.getHeight(), 0.001f);
}
}

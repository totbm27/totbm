0-->1-->0-->compileRepair


# Test Method
@Test
public void testGetAPILimitStatus() throws InstagramException {
    InstagramException ex1 = new InstagramException("No headers");
    int result1 = ex1.getAPILimitStatus();
    org.junit.Assert.assertEquals(-1, result1);

       <Buggy Line>: diamond operator is not supported in -source 1.6
    Map<String, String> headers = new java.util.HashMap<>();

    headers.put("X-RateLimit-Limit", "5000");
    headers.put("X-RateLimit-Remaining", "4999");
    InstagramException ex2 = new InstagramException("With headers", headers) {
        @Override
        public int getAPILimitStatus() {
            String limit = headers.get("X-RateLimit-Limit");
            if (limit != null) {
                try {
                    return Integer.parseInt(limit);
                } catch (NumberFormatException e) {
                    return -1;
                }
            }
            return -1;
        }
    };
    int result2 = ex2.getAPILimitStatus();
    org.junit.Assert.assertEquals(5000, result2);
}


# Instruction
The test method has a bug error (marked <Buggy Line>). 
 Please repair the buggy code line and return the complete and compilable test method after repair. 
The generated code should be enclosed within ``` ```.

########

1-->2-->0-->compileRepair


# Test Method
@Test
public void testGetAPILimitStatus() throws InstagramException {
    InstagramException ex1 = new InstagramException("No headers");
    int result1 = ex1.getAPILimitStatus();
    org.junit.Assert.assertEquals(-1, result1);
    Map<String, String> headers = new java.util.HashMap<String, String>();
    headers.put("X-RateLimit-Limit", "5000");
    headers.put("X-RateLimit-Remaining", "4999");
    InstagramException ex2 = new InstagramException("With headers", headers) {
        @Override
        public int getAPILimitStatus() {

             <Buggy Line>: local variable headers is accessed from within inner class; needs to be declared final
            String limit = headers.get("X-RateLimit-Limit");

            if (limit != null) {
                try {
                    return Integer.parseInt(limit);
                } catch (NumberFormatException e) {
                    return -1;
                }
            }
            return -1;
        }
    };
    int result2 = ex2.getAPILimitStatus();
    org.junit.Assert.assertEquals(5000, result2);
}


# Instruction
The test method has a bug error (marked <Buggy Line>). 
 Please repair the buggy code line and return the complete and compilable test method after repair. 
The generated code should be enclosed within ``` ```.

########


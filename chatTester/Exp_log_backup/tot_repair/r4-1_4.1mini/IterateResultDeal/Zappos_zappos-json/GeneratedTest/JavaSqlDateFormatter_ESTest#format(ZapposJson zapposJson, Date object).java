// original test path: /Users/curtis/Github/Thesis/chatTester/Repos/Zappos_zappos-json/src/test/java/com/zappos/json/format/JavaSqlDateFormatter_ESTest.java
/*
 * This file was automatically generated by EvoSuite
 * Thu Jan 25 13:37:54 GMT 2024
 */
package com.zappos.json.format;




import static org.mockito.Mockito.*;
import java.util.Date;
import java.util.*;
import java.lang.*;
import org.junit.Test;
import static org.junit.Assert.*;
import static org.evosuite.runtime.EvoAssertions.*;
import com.zappos.json.ZapposJson;
import com.zappos.json.format.JavaSqlDateFormatter;
import com.zappos.json.format.ValueFormatter;
import java.sql.Date;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import org.evosuite.runtime.EvoRunner;
import org.evosuite.runtime.EvoRunnerParameters;
import org.junit.runner.RunWith;

@RunWith(EvoRunner.class)
@EvoRunnerParameters(mockJVMNonDeterminism = true, useVFS = true, useVNET = true, resetStaticState = true, separateClassLoader = false)
public class JavaSqlDateFormatter_ESTest extends JavaSqlDateFormatter_ESTest_scaffolding {

    
    
    
    

    @Test
    public void testFormat_withPattern_and_withoutPattern() throws Exception {
        // Arrange:
        JavaSqlDateFormatter formatterSpy = spy(new JavaSqlDateFormatter() {
            // Override getPattern to simulate behavior
            @Override
            public String getPattern() {
                return null; // default to no pattern
            }

            // Mock newFormatter to return a SimpleDateFormat with fixed pattern
            @Override
            public SimpleDateFormat newFormatter() {
                return new SimpleDateFormat("yyyy-MM-dd");
            }

            // Mock toJsonValue to just return the formatted string (simulate JSON wrapping)
            @Override
            public String toJsonValue(ZapposJson zapposJson, String formatted) {
                return formatted;
            }
        });

        ZapposJson mockZapposJson = mock(ZapposJson.class);
        Date date = new SimpleDateFormat("yyyy-MM-dd").parse("2024-01-15");

        // Act & Assert:

        // Case 1: pattern is null => uses newFormatter
        String expectedDefaultFormat = new SimpleDateFormat("yyyy-MM-dd").format(date);
        String actualDefaultFormat = formatterSpy.format(mockZapposJson, date);
        assertEquals(expectedDefaultFormat, actualDefaultFormat);

        // Case 2: pattern is non-null => uses getPattern()
        doReturn("MM/dd/yyyy").when(formatterSpy).getPattern();

        String expectedPatternFormat = new SimpleDateFormat("MM/dd/yyyy").format(date);
        String actualPatternFormat = formatterSpy.format(mockZapposJson, date);
        assertEquals(expectedPatternFormat, actualPatternFormat);
    }
}
